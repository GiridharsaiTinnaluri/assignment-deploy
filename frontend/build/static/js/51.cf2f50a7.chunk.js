"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[51],{7051:function(e,s,a){a.r(s);var n=a(4942),t=a(1413),i=a(8152),l=a(2791),r=a(8820),o=a(3263),d=a(4880),c=a(9434),u=a(7651),m=a(184);s.default=function(){var e=(0,l.useState)({email:"",password:""}),s=(0,i.Z)(e,2),a=s[0],p=s[1],g=(0,c.I0)(),h=(0,c.v9)((function(e){return e.auth})),f=(0,l.useState)({}),w=(0,i.Z)(f,2),j=w[0],x=w[1],v=(0,l.useState)(""),b=(0,i.Z)(v,2),N=(b[0],b[1],(0,d.k6)());(0,l.useEffect)((function(){var e=setTimeout((function(){g(u.Y.message(""))}),2e3);return function(){clearTimeout(e)}}));var S=(0,l.useCallback)((function(e){p((function(s){return(0,t.Z)((0,t.Z)({},s),{},(0,n.Z)({},e.target.name,e.target.value))}))}),[]),k=(0,l.useCallback)((function(){var e={};if(""===a.email)e.email="Email required!";else{/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.email)||(e.email="Invalid Email")}return""===a.password?e.password="password required!":a.password.length<5&&(e.password="Length should be min 5 characters"),x((0,t.Z)({},e)),Object.keys(e).length<1}),[a]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("section",{className:"Login-header",children:(0,m.jsxs)("h1",{children:[(0,m.jsx)(r.SPH,{}),"Login"]})}),(0,m.jsx)("p",{className:"not-valid",children:h.message}),(0,m.jsx)("section",{className:"",children:(0,m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),g(u.Y.isLoading()),k()?o.Z.post("/api/user/login",{email:a.email,password:a.password}).then((function(e){200===parseInt(e.status)&&(localStorage.setItem("TOKEN",e.data.token),localStorage.setItem("USER",JSON.stringify(e.data.newUser)),localStorage.setItem("USERID",JSON.stringify(e.data.newUser.id)),g(u.Y.message("Login successful")),g(u.Y.login({user:e.data.newUser,token:e.data.token})),g(u.Y.message(e.data.message)),N.replace("/")),p({email:"",password:""})})).catch((function(e){console.log(e);var s=e.response&&e.response.data&&e.response.data.message||e.message||e.toString();g(u.Y.message(s))})).finally((function(){g(u.Y.stopLoading())})):g(u.Y.stopLoading())},children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"email",className:"input-label",children:"Email"})," ",(0,m.jsx)("br",{}),(0,m.jsx)("input",{className:"input",type:"email",name:"email",placeholder:"Enter email",value:a.email,onChange:S}),(0,m.jsx)("span",{className:"not-valid",children:j.email})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"password",className:"input-label",children:"Password"})," ",(0,m.jsx)("br",{}),(0,m.jsx)("input",{className:"input",type:"password",name:"password",value:a.password,placeholder:"Enter password..",onChange:S}),(0,m.jsx)("span",{className:"not-valid",children:j.password})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("button",{type:"submit",className:"btn-login",disabled:h.isLoading,children:[" ",h.isLoading?"Loading ...":"Login"," "]})})]})})]})}}}]);
//# sourceMappingURL=51.cf2f50a7.chunk.js.map